import{_ as J,g as p,c as b,u as K,o as O,a,b as s,h as g,n as x,F as V,r as N,f as d,t as l,w,i as u,v,j as Q,d as W,e as r}from"./index-5UKtjEom.js";const X={class:"admin-panel"},Y={class:"view-switcher"},Z={key:0},ss={key:0,class:"loading-state"},os={key:1,class:"empty-state"},es={key:2,class:"course-grid"},ts=["src","alt"],ls={class:"course-card-content"},ns={class:"text-lg font-bold"},as={class:"text-sm text-secondary mt-2"},rs={class:"course-card__details"},is={class:"course-card-actions"},ds=["onClick"],us=["onClick","title"],cs=["onClick"],ms={key:1},ps={key:0,class:"loading-state"},vs={key:1,class:"empty-state"},bs={key:2,class:"enrollments-list"},gs={class:"summary-card"},Cs={class:"mb-0"},ys={class:"enrollment-card__header"},fs={class:"font-bold"},ks={class:"enrollment-count"},_s={class:"enrollment-card__body"},hs={class:"table-responsive"},xs={class:"custom-table"},ws={class:"font-bold"},As={class:"status-badge status-badge--neutral"},Ds={class:"modal-container"},Es={class:"modal-body"},Is={class:"form-group"},Vs={class:"form-group"},Ns={class:"form-group"},Ms={class:"form-group"},$s={class:"form-group"},Ps={class:"form-group"},Us={class:"form-group form-group--full-width"},qs={class:"form-group form-group--full-width"},Ss={class:"form-check-label"},Ls={class:"modal-container"},Ts={class:"modal-body"},Fs={class:"modal-container"},Bs={class:"modal-body"},js={__name:"AdministracionView",setup(Rs){const i=K(),U=W(),A=p(!1),D=p(!1),C=p(null),y=p(!1),f=p(null),n=p({codigo:"",nombre:"",estado:!0,precio:"",duracion:"",descripcion:"",cupos:0,inscritos:0,img:""}),c=p("cursos"),M=b(()=>i.getters.getCursos),q=b(()=>i.getters.isLoadingCursos),E=b(()=>i.getters.getInscripciones),S=b(()=>i.getters.isLoadingInscripciones),L=()=>{n.value={codigo:"",nombre:"",estado:!0,precio:"",duracion:"",descripcion:"",cupos:0,inscritos:0,img:`https://picsum.photos/seed/${Date.now()}/400/200`},A.value=!0},k=()=>{A.value=!1},$=()=>{f.value={...n.value},y.value=!0},T=async()=>{try{await i.dispatch("addCurso",{...f.value}),y.value=!1,k(),alert("‚úÖ Curso agregado exitosamente")}catch(t){alert("‚ùå Error al agregar curso: "+t.message)}},I=()=>{y.value=!1,f.value=null},F=t=>{C.value=t,D.value=!0},_=()=>{D.value=!1,C.value=null},B=async()=>{try{await i.dispatch("deleteCurso",C.value.id),_(),alert("‚úÖ Curso eliminado exitosamente")}catch(t){alert("‚ùå Error al eliminar curso: "+t.message)}},j=t=>{U.push({name:"editar",params:{id:t.id}})},R=async t=>{try{await i.dispatch("updateCurso",{id:t.id,...t,estado:!t.estado}),alert(`‚úÖ Curso ${t.estado?"desactivado":"activado"} exitosamente`)}catch(o){alert("‚ùå Error al actualizar curso: "+o.message)}},P=t=>{c.value=t},z=b(()=>{const t={};return E.value.forEach(o=>{t[o.cursoId]||(t[o.cursoId]={cursoNombre:o.cursoNombre,alumnos:[]}),t[o.cursoId].alumnos.push(o)}),t}),G=t=>t?(t.toDate?t.toDate():new Date(t)).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return O(()=>{i.dispatch("getCursos"),i.dispatch("getInscripciones")}),(t,o)=>(r(),a("div",X,[o[37]||(o[37]=s("header",{class:"admin-panel__header"},[s("h1",null,"Panel de Administraci√≥n"),s("p",{class:"text-secondary"},"Gestiona cursos e inscripciones")],-1)),s("div",Y,[s("button",{onClick:o[0]||(o[0]=e=>P("cursos")),class:x(["btn",{"btn-primary":c.value==="cursos","btn-secondary":c.value!=="cursos"}])}," üìö Gesti√≥n de Cursos ",2),s("button",{onClick:o[1]||(o[1]=e=>P("inscripciones")),class:x(["btn",{"btn-primary":c.value==="inscripciones","btn-secondary":c.value!=="inscripciones"}])}," üë• Alumnos Inscritos ",2)]),c.value==="cursos"?(r(),a("section",Z,[s("div",{class:"section-header"},[s("button",{onClick:L,class:"btn btn-primary"}," ‚ûï Agregar Nuevo Curso ")]),q.value?(r(),a("div",ss,[...o[10]||(o[10]=[s("div",{class:"spinner"},null,-1),s("p",null,"Cargando cursos...",-1)])])):M.value.length===0?(r(),a("div",os,[...o[11]||(o[11]=[s("h4",null,"üìö No hay cursos disponibles",-1),s("p",{class:"text-secondary"},"A√∫n no se han agregado cursos al sistema.",-1)])])):(r(),a("div",es,[(r(!0),a(V,null,N(M.value,e=>(r(),a("article",{key:e.id,class:"course-card"},[s("img",{src:e.img,alt:`Banner del curso ${e.nombre}`,class:"course-card__image"},null,8,ts),s("div",ls,[s("h3",ns,l(e.nombre),1),s("p",as,l(e.descripcion),1),s("div",rs,[s("span",null,[o[12]||(o[12]=s("strong",null,"Precio:",-1)),d(" $"+l(parseInt(e.precio).toLocaleString()),1)]),s("span",null,[o[13]||(o[13]=s("strong",null,"Duraci√≥n:",-1)),d(" "+l(e.duracion),1)]),s("span",null,[o[14]||(o[14]=s("strong",null,"Cupos:",-1)),d(" "+l(e.inscritos)+" / "+l(e.cupos),1)]),s("span",null,[o[15]||(o[15]=s("strong",null,"Estado:",-1)),s("span",{class:x(["status-badge",e.estado?"status-badge--active":"status-badge--inactive"])},l(e.estado?"Activo":"Inactivo"),3)])]),s("div",is,[s("button",{onClick:h=>j(e),class:"btn btn-secondary",title:"Editar curso"},"‚úèÔ∏è",8,ds),s("button",{onClick:h=>R(e),class:"btn btn-secondary",title:e.estado?"Desactivar curso":"Activar curso"},l(e.estado?"‚è∏Ô∏è":"‚ñ∂Ô∏è"),9,us),s("button",{onClick:h=>F(e),class:"btn btn-secondary",title:"Eliminar curso"},"üóëÔ∏è",8,cs)])])]))),128))]))])):g("",!0),c.value==="inscripciones"?(r(),a("section",ms,[S.value?(r(),a("div",ps,[...o[16]||(o[16]=[s("div",{class:"spinner"},null,-1),s("p",null,"Cargando inscripciones...",-1)])])):E.value.length===0?(r(),a("div",vs,[...o[17]||(o[17]=[s("h4",null,"üìã No hay inscripciones registradas",-1),s("p",{class:"text-secondary"},"A√∫n no hay estudiantes inscritos en los cursos.",-1)])])):(r(),a("div",bs,[s("div",gs,[o[19]||(o[19]=s("h5",{class:"font-bold"},"üìä Resumen Total",-1)),s("p",Cs,[o[18]||(o[18]=s("strong",null,"Total de inscripciones:",-1)),d(" "+l(E.value.length),1)])]),(r(!0),a(V,null,N(z.value,(e,h)=>(r(),a("div",{key:h,class:"enrollment-card"},[s("header",ys,[s("h4",fs,"üìö "+l(e.cursoNombre),1),s("span",ks,l(e.alumnos.length)+" alumno(s)",1)]),s("div",_s,[s("div",hs,[s("table",xs,[o[20]||(o[20]=s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"Email del Alumno"),s("th",null,"Fecha de Inscripci√≥n"),s("th",null,"Precio Pagado"),s("th",null,"M√©todo de Pago"),s("th",null,"Estado")])],-1)),s("tbody",null,[(r(!0),a(V,null,N(e.alumnos,(m,H)=>(r(),a("tr",{key:m.id},[s("td",null,l(H+1),1),s("td",ws,l(m.usuarioEmail),1),s("td",null,l(G(m.fechaInscripcion)),1),s("td",null,"$"+l(Number(m.cursoPrecio).toLocaleString()),1),s("td",null,[s("span",As,l(m.metodoPago),1)]),s("td",null,[s("span",{class:x(["status-badge",`status-badge--${m.estado}`])},l(m.estado),3)])]))),128))])])])])]))),128))]))])):g("",!0),A.value?(r(),a("div",{key:2,class:"modal-overlay",onClick:w(k,["self"])},[s("div",Ds,[s("header",{class:"modal-header"},[o[21]||(o[21]=s("h5",{class:"modal-title"},"‚ûï Agregar Nuevo Curso",-1)),s("button",{onClick:k,class:"modal-close-btn"},"√ó")]),s("div",Es,[s("form",{onSubmit:w($,["prevent"]),class:"form-grid"},[s("div",Is,[o[22]||(o[22]=s("label",null,"C√≥digo:",-1)),u(s("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>n.value.codigo=e),type:"text",required:""},null,512),[[v,n.value.codigo]])]),s("div",Vs,[o[23]||(o[23]=s("label",null,"Nombre:",-1)),u(s("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>n.value.nombre=e),type:"text",required:""},null,512),[[v,n.value.nombre]])]),s("div",Ns,[o[24]||(o[24]=s("label",null,"Precio:",-1)),u(s("input",{"onUpdate:modelValue":o[4]||(o[4]=e=>n.value.precio=e),type:"number",required:""},null,512),[[v,n.value.precio]])]),s("div",Ms,[o[25]||(o[25]=s("label",null,"Duraci√≥n:",-1)),u(s("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>n.value.duracion=e),type:"text",required:""},null,512),[[v,n.value.duracion]])]),s("div",$s,[o[26]||(o[26]=s("label",null,"Cupos:",-1)),u(s("input",{"onUpdate:modelValue":o[6]||(o[6]=e=>n.value.cupos=e),type:"number",required:""},null,512),[[v,n.value.cupos,void 0,{number:!0}]])]),s("div",Ps,[o[27]||(o[27]=s("label",null,"URL Imagen:",-1)),u(s("input",{"onUpdate:modelValue":o[7]||(o[7]=e=>n.value.img=e),type:"url",placeholder:"https://ejemplo.com/imagen.jpg"},null,512),[[v,n.value.img]])]),s("div",Us,[o[28]||(o[28]=s("label",null,"Descripci√≥n:",-1)),u(s("textarea",{"onUpdate:modelValue":o[8]||(o[8]=e=>n.value.descripcion=e),rows:"3",required:""},null,512),[[v,n.value.descripcion]])]),s("div",qs,[s("label",Ss,[u(s("input",{"onUpdate:modelValue":o[9]||(o[9]=e=>n.value.estado=e),type:"checkbox"},null,512),[[Q,n.value.estado]]),o[29]||(o[29]=d(" Curso activo ",-1))])])],32)]),s("footer",{class:"modal-footer"},[s("button",{onClick:k,class:"btn btn-secondary"},"Cancelar"),s("button",{onClick:$,class:"btn btn-primary"},"Agregar Curso")])])])):g("",!0),y.value?(r(),a("div",{key:3,class:"modal-overlay",onClick:w(I,["self"])},[s("div",Ls,[s("header",{class:"modal-header"},[o[30]||(o[30]=s("h5",{class:"modal-title"},"‚úÖ Confirmar Creaci√≥n",-1)),s("button",{onClick:I,class:"modal-close-btn"},"√ó")]),s("div",Ts,[s("p",null,[o[31]||(o[31]=d("Confirmas que deseas crear el curso ",-1)),s("strong",null,l(f.value?.nombre),1),o[32]||(o[32]=d("?",-1))])]),s("footer",{class:"modal-footer"},[s("button",{onClick:I,class:"btn btn-secondary"},"Cancelar"),s("button",{onClick:T,class:"btn btn-primary"},"Confirmar")])])])):g("",!0),D.value?(r(),a("div",{key:4,class:"modal-overlay",onClick:w(_,["self"])},[s("div",Fs,[s("header",{class:"modal-header"},[o[33]||(o[33]=s("h5",{class:"modal-title"},"‚ö†Ô∏è Confirmar Eliminaci√≥n",-1)),s("button",{onClick:_,class:"modal-close-btn"},"√ó")]),s("div",Bs,[s("p",null,[o[34]||(o[34]=d("¬øEst√°s seguro de que deseas eliminar el curso ",-1)),s("strong",null,l(C.value?.nombre),1),o[35]||(o[35]=d("?",-1))]),o[36]||(o[36]=s("p",{class:"text-secondary"},"Esta acci√≥n no se puede deshacer.",-1))]),s("footer",{class:"modal-footer"},[s("button",{onClick:_,class:"btn btn-secondary"},"Cancelar"),s("button",{onClick:B,class:"btn btn-primary"},"S√≠, borrar")])])])):g("",!0)]))}},Gs=J(js,[["__scopeId","data-v-653f65b2"]]);export{Gs as default};
