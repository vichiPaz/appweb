import{_ as P,g as C,c,u as T,a as r,b as s,h as E,k as M,l as S,m as V,t as a,F as b,r as f,w as N,i as I,p as L,f as _,e}from"./index-5UKtjEom.js";const $={class:"cart-view"},B={key:0,class:"empty-state"},D={key:1,class:"cart-layout"},q={class:"cart-items"},j={class:"card"},F={class:"card__header"},R={class:"font-bold"},U={class:"card__body"},z=["src","alt"],A={class:"cart-item__details"},G={class:"font-bold"},H={class:"text-sm text-secondary"},J={class:"font-bold mt-2"},K=["onClick"],O={class:"cart-summary"},Q={class:"card"},W={class:"card__body"},X={class:"summary-row"},Y={class:"font-bold"},Z={class:"summary-row summary-row--total"},ss={class:"font-bold"},os={class:"modal-container"},ts={class:"modal-body"},as={class:"form-group"},rs={class:"summary-list"},es={class:"font-bold"},ls={class:"summary-row summary-row--total"},ns={class:"font-bold"},is={class:"form-group"},ds={class:"info-box"},cs={__name:"CarritoView",setup(us){const l=T(),u=C(!1),n=C("transferencia"),m=c(()=>l.getters.getCarrito),p=c(()=>l.getters.getTotalCarrito),v=c(()=>l.getters.getTotalPrecioCarrito),g=c(()=>l.getters.getUserEmail),y=d=>{l.dispatch("eliminarDelCarrito",d)},h=()=>{confirm("¬øEst√°s seguro de que quieres limpiar todo el carrito?")&&(l.dispatch("limpiarCarrito"),alert("üõí Carrito limpiado exitosamente"))},k=()=>{if(m.value.length===0){alert("üõí Tu carrito est√° vac√≠o");return}u.value=!0},i=()=>{u.value=!1,n.value="transferencia"},w=async()=>{try{await l.dispatch("procesarCompra",{metodoPago:n.value}),i(),alert("‚úÖ ¬°Compra realizada exitosamente! Te has inscrito en todos los cursos seleccionados.")}catch(d){alert("‚ùå Error al procesar la compra: "+d.message)}};return(d,o)=>{const x=V("router-link");return e(),r("div",$,[o[16]||(o[16]=s("header",{class:"cart-view__header"},[s("h1",null,"üõí Mi Carrito de Cursos"),s("p",{class:"text-secondary"},"Inscr√≠bete en tus cursos favoritos de 31 Minutos")],-1)),p.value===0?(e(),r("div",B,[o[2]||(o[2]=s("h4",null,"üõí Tu carrito est√° vac√≠o",-1)),o[3]||(o[3]=s("p",{class:"text-secondary"},"¬°Explora nuestros cursos y agrega los que m√°s te gusten!",-1)),M(x,{to:"/home",class:"btn btn-primary"},{default:S(()=>[...o[1]||(o[1]=[_("Ver Cursos",-1)])]),_:1})])):(e(),r("div",D,[s("div",q,[s("div",j,[s("div",F,[s("h5",R,"üìö Cursos Seleccionados ("+a(p.value)+")",1)]),s("div",U,[(e(!0),r(b,null,f(m.value,t=>(e(),r("div",{key:t.cursoId,class:"cart-item"},[s("img",{src:t.cursoImagen||"https://picsum.photos/80/60?random=default",alt:t.cursoNombre,class:"cart-item__image"},null,8,z),s("div",A,[s("h6",G,a(t.cursoNombre),1),s("span",H,"C√≥digo: "+a(t.cursoCodigo),1),s("p",J,"$"+a(t.cursoPrecio.toLocaleString()),1)]),s("button",{onClick:ms=>y(t.cursoId),class:"btn btn-secondary",title:"Eliminar del carrito"}," üóëÔ∏è ",8,K)]))),128))])])]),s("div",O,[s("div",Q,[o[7]||(o[7]=s("div",{class:"card__header"},[s("h5",{class:"font-bold"},"üí∞ Resumen de Compra")],-1)),s("div",W,[s("div",X,[o[4]||(o[4]=s("span",null,"Cursos:",-1)),s("span",Y,a(p.value),1)]),o[6]||(o[6]=s("hr",{class:"divider"},null,-1)),s("div",Z,[o[5]||(o[5]=s("span",null,"Total:",-1)),s("span",ss,"$"+a(v.value.toLocaleString()),1)]),s("div",{class:"summary-actions"},[s("button",{onClick:k,class:"btn btn-primary"}," üí≥ Proceder al Pago "),s("button",{onClick:h,class:"btn btn-secondary"}," üóëÔ∏è Limpiar Carrito ")])])])])])),u.value?(e(),r("div",{key:2,class:"modal-overlay",onClick:N(i,["self"])},[s("div",os,[s("header",{class:"modal-header"},[o[8]||(o[8]=s("h5",{class:"modal-title"},"üí≥ Confirmar Compra",-1)),s("button",{onClick:i,class:"modal-close-btn"},"√ó")]),s("div",ts,[s("div",as,[o[10]||(o[10]=s("h6",null,"Resumen de tu compra:",-1)),s("ul",rs,[(e(!0),r(b,null,f(m.value,t=>(e(),r("li",{key:t.cursoId},[s("span",null,a(t.cursoNombre),1),s("span",es,"$"+a(t.cursoPrecio.toLocaleString()),1)]))),128))]),o[11]||(o[11]=s("hr",{class:"divider"},null,-1)),s("div",ls,[o[9]||(o[9]=s("span",null,"Total a pagar:",-1)),s("span",ns,"$"+a(v.value.toLocaleString()),1)])]),s("div",is,[o[13]||(o[13]=s("label",null,"M√©todo de pago:",-1)),I(s("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>n.value=t)},[...o[12]||(o[12]=[s("option",{value:"transferencia"},"üè¶ Transferencia Bancaria",-1),s("option",{value:"tarjeta"},"üí≥ Tarjeta de Cr√©dito",-1)])],512),[[L,n.value]])]),s("div",ds,[s("p",null,[o[14]||(o[14]=s("strong",null,"Email de confirmaci√≥n:",-1)),_(" "+a(g.value),1)]),o[15]||(o[15]=s("p",null,[s("strong",null,"Estado:"),_(" Pendiente de confirmaci√≥n")],-1))])]),s("footer",{class:"modal-footer"},[s("button",{onClick:i,class:"btn btn-secondary"},"Cancelar"),s("button",{onClick:w,class:"btn btn-primary"},"Confirmar Compra")])])])):E("",!0)])}}},_s=P(cs,[["__scopeId","data-v-e688bcfc"]]);export{_s as default};
