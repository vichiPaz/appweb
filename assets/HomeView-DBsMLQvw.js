import{_ as C,c,u as b,o as f,a as o,b as s,F as v,r as k,d as E,e as a,t as i,f as d,n as x}from"./index-5UKtjEom.js";const I={class:"home-view"},w={key:0,class:"loading-state"},S={key:1,class:"empty-state"},B={key:2,class:"course-grid"},L=["src","alt"],N={class:"course-card-content"},V={class:"text-lg font-bold"},$={class:"text-sm text-secondary mt-2"},A={class:"course-card__details"},D={class:"course-card-actions"},z=["onClick","disabled"],F={key:0},H={key:1},M={key:2},P={__name:"HomeView",setup(R){const n=b(),p=E(),u=c(()=>n.getters.getCursos.filter(t=>t.estado)),g=c(()=>n.getters.isLoadingCursos),_=c(()=>n.getters.isAuthenticated),m=t=>{t.target.src="https://picsum.photos/400/200?random=fallback"},h=t=>t||"https://picsum.photos/400/200?random=default",l=t=>n.getters.getCursoEnCarrito(t),y=async t=>{if(!_.value){confirm(`ðŸ” Para agregar cursos al carrito necesitas iniciar sesiÃ³n.

Â¿Deseas ir al login?`)&&p.push("/login");return}if(l(t.id)){alert("âœ… Este curso ya estÃ¡ en tu carrito");return}if(t.inscritos>=t.cupos){alert("âŒ No hay cupos disponibles para este curso");return}try{n.dispatch("agregarAlCarrito",t),await n.dispatch("reducirCupo",t.id),alert(`ðŸ›’ Â¡Curso "${t.nombre}" agregado al carrito! Se ha reservado tu cupo.`)}catch(r){console.error("Error al inscribirse en el curso:",r),alert("âŒ Error al inscribirse en el curso: "+r.message)}};return f(()=>{n.dispatch("getCursos")}),(t,r)=>(a(),o("div",I,[r[5]||(r[5]=s("header",{class:"home-view__header"},[s("h1",null,"CatÃ¡logo de Cursos"),s("p",{class:"text-secondary"},"Explora nuestra oferta acadÃ©mica inspirada en 31 Minutos")],-1)),g.value?(a(),o("div",w,[...r[0]||(r[0]=[s("div",{class:"spinner"},null,-1),s("p",null,"Cargando cursos...",-1)])])):u.value.length===0?(a(),o("div",S,[...r[1]||(r[1]=[s("h4",null,"ðŸ“š No hay cursos disponibles",-1),s("p",{class:"text-secondary"},"AÃºn no se han agregado cursos al sistema.",-1)])])):(a(),o("div",B,[(a(!0),o(v,null,k(u.value,e=>(a(),o("article",{key:e.id,class:"course-card"},[s("img",{src:h(e.img),alt:`Banner del curso ${e.nombre}`,class:"course-card__image",onError:m,loading:"lazy"},null,40,L),s("div",N,[s("h3",V,i(e.nombre),1),s("p",$,i(e.descripcion),1),s("div",A,[s("span",null,[r[2]||(r[2]=s("strong",null,"Precio:",-1)),d(" $"+i(parseInt(e.precio).toLocaleString()),1)]),s("span",null,[r[3]||(r[3]=s("strong",null,"DuraciÃ³n:",-1)),d(" "+i(e.duracion),1)]),s("span",null,[r[4]||(r[4]=s("strong",null,"Cupos:",-1)),d(" "+i(e.inscritos)+" / "+i(e.cupos),1)])]),s("div",D,[s("button",{onClick:T=>y(e),class:x(["btn",l(e.id)?"btn-secondary":"btn-primary"]),disabled:l(e.id)||e.cupos-e.inscritos<=0},[l(e.id)?(a(),o("span",F,"âœ… En Carrito")):e.cupos-e.inscritos<=0?(a(),o("span",H,"âŒ Sin Cupos")):(a(),o("span",M,"ðŸ›’ Inscribirse"))],10,z)])])]))),128))]))]))}},q=C(P,[["__scopeId","data-v-815d4d8c"]]);export{q as default};
