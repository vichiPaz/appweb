import{_ as U,g as l,c as k,u as E,q as N,o as j,a as b,b as e,w as B,i,v as r,h as M,f as T,j as q,s as D,d as I,e as g}from"./index-5UKtjEom.js";const R={class:"edit-page"},S={class:"form-container"},z={class:"form-grid"},L={class:"form-group"},A={class:"form-group"},G={class:"form-group form-group--full-width"},P={class:"form-group"},$={class:"form-group"},F={class:"form-group"},H={class:"form-group"},J={class:"form-group form-group--full-width"},K={key:0,class:"image-preview"},O=["src"],Q={class:"form-group form-group--full-width"},W={class:"form-check-label"},X={class:"form-actions"},Y={key:1,class:"loading-state"},Z={__name:"EditarView",setup(_){const y=E(),V=N(),x=I(),u=l(""),n=l(""),d=l(!0),p=l(""),v=l(""),m=l(""),c=l(0),f=l(0),a=l(""),t=k(()=>y.getters.getCursoById(V.params.id));j(()=>{y.dispatch("getCursos"),setTimeout(()=>{t.value&&(u.value=t.value.codigo,n.value=t.value.nombre,d.value=t.value.estado,p.value=t.value.precio,v.value=t.value.duracion,m.value=t.value.descripcion,c.value=t.value.cupos,f.value=t.value.inscritos,a.value=t.value.img)},500)});const w=async()=>{if(!n.value||!u.value)return alert("El nombre y cÃ³digo son obligatorios");try{await y.dispatch("updateCurso",{id:V.params.id,codigo:u.value,nombre:n.value,estado:d.value,precio:p.value,duracion:v.value,descripcion:m.value,cupos:Number(c.value),inscritos:Number(f.value),img:a.value}),alert("âœ… Curso actualizado correctamente. Los cambios se verÃ¡n reflejados en todas las vistas."),setTimeout(()=>{x.push({name:"administracion"})},1e3)}catch(C){console.error(C)}};return(C,o)=>(g(),b("div",R,[e("div",S,[o[23]||(o[23]=e("div",{class:"form-header"},[e("h2",null,"Editar Curso"),e("p",{class:"text-secondary"},"Actualiza la informaciÃ³n del curso")],-1)),t.value?(g(),b("form",{key:0,onSubmit:B(w,["prevent"])},[e("div",z,[e("div",L,[o[11]||(o[11]=e("label",{for:"codigo"},"CÃ³digo *",-1)),i(e("input",{type:"text",id:"codigo","onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),required:""},null,512),[[r,u.value]])]),e("div",A,[o[12]||(o[12]=e("label",{for:"nombre"},"Nombre *",-1)),i(e("input",{type:"text",id:"nombre","onUpdate:modelValue":o[1]||(o[1]=s=>n.value=s),required:""},null,512),[[r,n.value]])]),e("div",G,[o[13]||(o[13]=e("label",{for:"descripcion"},"DescripciÃ³n",-1)),i(e("textarea",{id:"descripcion",rows:"3","onUpdate:modelValue":o[2]||(o[2]=s=>m.value=s)},null,512),[[r,m.value]])]),e("div",P,[o[14]||(o[14]=e("label",{for:"precio"},"Precio",-1)),i(e("input",{type:"number",id:"precio","onUpdate:modelValue":o[3]||(o[3]=s=>p.value=s)},null,512),[[r,p.value]])]),e("div",$,[o[15]||(o[15]=e("label",{for:"duracion"},"DuraciÃ³n",-1)),i(e("input",{type:"text",id:"duracion",placeholder:"ej: 2 meses","onUpdate:modelValue":o[4]||(o[4]=s=>v.value=s)},null,512),[[r,v.value]])]),e("div",F,[o[16]||(o[16]=e("label",{for:"cupos"},"Cupos",-1)),i(e("input",{type:"number",id:"cupos","onUpdate:modelValue":o[5]||(o[5]=s=>c.value=s)},null,512),[[r,c.value]])]),e("div",H,[o[17]||(o[17]=e("label",{for:"inscritos"},"Inscritos",-1)),i(e("input",{type:"number",id:"inscritos","onUpdate:modelValue":o[6]||(o[6]=s=>f.value=s)},null,512),[[r,f.value]])]),e("div",J,[o[19]||(o[19]=e("label",{for:"img"},"URL de la imagen:",-1)),i(e("input",{type:"url",id:"img","onUpdate:modelValue":o[7]||(o[7]=s=>a.value=s),placeholder:"https://ejemplo.com/imagen.jpg"},null,512),[[r,a.value]]),a.value?(g(),b("div",K,[o[18]||(o[18]=e("p",{class:"text-sm text-secondary"},"Vista previa:",-1)),e("img",{src:a.value,alt:"Vista previa",onError:o[8]||(o[8]=s=>s.target.style.display="none")},null,40,O)])):M("",!0)]),e("div",Q,[e("label",W,[i(e("input",{type:"checkbox",id:"estado","onUpdate:modelValue":o[9]||(o[9]=s=>d.value=s)},null,512),[[q,d.value]]),o[20]||(o[20]=T(" Curso activo/disponible ",-1))])])]),e("div",X,[e("button",{type:"button",class:"btn btn-secondary",onClick:o[10]||(o[10]=s=>D(x).push({name:"administracion"}))}," Cancelar "),o[21]||(o[21]=e("button",{type:"submit",class:"btn btn-primary"}," ðŸ’¾ Guardar Cambios ",-1))])],32)):(g(),b("div",Y,[...o[22]||(o[22]=[e("div",{class:"spinner"},null,-1),e("p",null,"Cargando curso...",-1)])]))])]))}},oo=U(Z,[["__scopeId","data-v-693e1746"]]);export{oo as default};
